{% extends "base.html" %}
{% block title %}ToDo List{% endblock %}
{% block head_resources %}
{% load static %}
<% htmlWebpackPlugin.tags.headTags.forEach( tag => { %>
    <% if (tag.tagName == 'link') {%>
        <link href="{% static "<%= tag.attributes.href %>" %}" rel="stylesheet">
    <% } %>
<% }) %>
{% endblock %}
{% block content %}
<form class="form-signin" method="post" action="{% url 'login' %}">
    {% if form.errors %}
    <div class="alert alert-primary" role="alert">
        Username and password isn't matching.
    </div>
    {% endif %}

    {% if next %}
    {% if user.is_authenticated %}
    <div class="alert alert-primary" role="alert">
        You are not permitted. </div>
    {% else %}
    <div class="alert alert-primary" role="alert">
        Please, sign in first.
    </div>
    {% endif %}
    {% endif %}
    {% csrf_token %}
    <h1 class="h3 mb-3 font-weight-normal">Sign In</h1>
    <label for="inputEmail" class="sr-only">Email</label>
    <input type="text" name="username" id="id_username" class="form-control" autocapitalize="none"
        autocomplete="username" maxlength="254" placeholder="Email" required autofocus>
    <label for="inputPassword" class="sr-only">Password</label>
    <input type="password" name="password" id="id_password" class="form-control" autocomplete="current-password"
        placeholder="Password" required>
    <div class="checkbox mb-3">
        <label>
            <input type="checkbox" value="remember-me"> Remember me
        </label>
    </div>
    <button class="btn btn-lg btn-primary btn-block" type="submit">Sign In</button>
    <input type="hidden" name="next" value="{{ next }}">

    <p class="mt-5 mb-3 text-muted">By Abdulrahman Alamoudi</p>
</form>
{% endblock %}
{% block body_resources %}
{% load static %}
<% htmlWebpackPlugin.tags.headTags.forEach( tag => { %>
    <% if (tag.tagName == 'script') {%>
        <script src="{% static "<%= tag.attributes.src %>" %}"></script>
    <% } %>
<% }) %>
{% endblock %}
